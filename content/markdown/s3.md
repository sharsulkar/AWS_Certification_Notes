# Simple Storage Service (S3)  
**Service category:** Object storage  
**Resiliency scope:** Region  
**Service scope:** Global  
**Service access:** Public  
**Service model:**  
**key words:**   
---
## Description  
## Internal Architecture  
### Buckets  
* container for objects  
* per account limits - 100 soft limit, 1000 hard limit  
* created in a specific region - primary home region. Data does not leave this region unless explicitly specified by design  
* Bucket naming conventions -  
  1. bucket name has to be **globally unique**, no one else can use the name in any other AWS account in any region  
  2. 3-63 characters, all lower case, no underscores  
  3. can start with letter or number  
  4. cant be formatted as IP addresses eg 1.1.1.1  
* they can hold unlimited number of objects  
* it has a flat structure, everything is at root level - no hierarchical folder structure. The files can be arranged into folder-like structure by using **prefixes**  

#### Object versioning
* Object versioning is a feature which can be enabled on an S3 bucket - allowing the bucket to store multi versions of objects  
* 
* When new bucket is created, versioning is disabled. It can be enabled on the bucket after creation. The versioning can be suspended on an enabled bucket. 
** but once enabled, versioning cannot be disabled on the bucket** 
* Without versioning, any object can be uniquely identified in a bucket with its key. Any changes overwrites the object.  
* With versioning enabled, the object key+versionid+bucketname is the unique identifier. If versionid is not mentioned, the latest version will always be used.  
* All versions are immutable, any changes creates a new version of the object. The old version is unchanged.  
* **Delete Marker** - If object is manually deleted without providing a specific versionid, S3 creates a special version called Delete marker as the latest version 
and hides the object from view. The object is not actually deleted from S3. This delete marker can be deleted as well reinstating the object.  
* If object is manually deleted by providing a version id, that version is deleted from S3. If latest version is deleted in this way, the most recent version is tagged as latest.  


### Objects  
* files stored as key-value pairs
* object size can range from ** 0 to 5TB**  
* Object structure -  
 1. object key - unique identifier, can be used to refer the object along with bucketname  
 2. value - object data  
 3. Version ID  
 4. Metadata  
 5. Access control  
 6. Subresources  

## Security and Access control  
### S3 bucket policy  
* It is a type of AWS resource policy (it provides resource perspective to permissions)  
* It can provide access to identities from same or different accounts  
* It can provide access to anonymous principals - can be used for static hosting of websites  
* Similar json structure as identity policy, in addition, there is an explicit **"Principal" section**  
* examples - https://docs.aws.amazon.com/AmazonS3/latest/userguide/example-bucket-policies.html  

### Access Control List (ACL)  
* legacy - not recommended to use  
* Object subresource  
* inflexible compared to bucket policy  

### Block Public Access settings  
* will only apply anonymous principals that do not have AWS identities  
* as a fail safe to avoid unintentional public access to S3 due to wrongly written permission and bucket policies  
* they can be configured during bucket creation or afterwards and have multiple, flexible options to choose from  

## Service Billing  
## Encryption  
## IO operation  
## Use cases  
### Static hosting  
* feature can be enabled using S3  
* AWS creates website endpoint using the bucketname and region. For custom domains, the domain name must match with the bucketname  
* Static website hosting like blogs etc  
* Offloading static content for dyanamic content of a website  
* out-of-band pages - if server is offline due to maintance or issues, any error pages can be hosted in a different region on S3.  
*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   

## Related services  
### In the same category  
### With the same scope  
### Most commonly used with  
## AWS whitepapers  
